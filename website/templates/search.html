{% extends "base.html" %}

{% block title %}Search{% endblock %}
{% block content %}


<form method="POST">
  
    <h3 align="center" id="title"><u>Search</u></h3>
    <div class="form-group">
      <input
        type="name"
        class="form-control"
        id="name"
        name="name"
        placeholder="Enter Computer Name"
      />
    </div>
    
    
    <br />
    <div align="center">
      <select name="model" id="model">
        <option value="">By Model</option>
        {% for m in models %}      
        <option value="{{m}}">{{m}}</option>
        {%endfor%}
      </select>
  
      <select name="location" id="location">
        <option value="" selected>By Location</option>
        {% for L in locations %}      
        <option value="{{L}}">{{L}}</option>
        {%endfor%}
      </select>
  
      <select name="active" id="active">
        <option value="">Is Active</option>
        <option value="True">True</option>
        <option value="False">False</option>
      </select>
  
      <select name="user" id="user">
        <option value="" selected>By User</option>
        {% for u in users %}      
        <option value="{{u}}">{{u}}</option>
        {%endfor%}
      </select>
      <br />
      <br />
      
      {%if filtered%}
      <table id = "table" border=" 1px solid">
        <tr align = "center">
            <th style ="width: 50%">Active Filters</th>
        </tr>
        {%if filter[0]%}
        <tr align = "center">
          <td> Name: </td>
          <td> {{filter[0]}} </td>
        </tr>
        {%endif%}

        {%if filter[1]%}
        <tr align = "center">
          <td> Model: </td>
          <td> {{filter[1]}} </td>
        </tr>
        {%endif%}

        {%if filter[2]%}
        <tr align = "center">
          <td> Location: </td>
          <td> {{filter[2]}} </td>
        </tr>
        {%endif%}

        {%if filter[3]%}
        <tr align = "center">
          <td> User: </td>
          <td> {{filter[3]}} </td>
        </tr>
        {%endif%}

        {%if filter[4]%}
        <tr align = "center">
          <td> Is Active: </td>
          <td> {{filter[4]}} </td>
        </tr>
        {%endif%}
        
      </table>
      {%endif%}
      <br />

      <button type="submit" class="btn btn-primary">Search</button>
      <br />
      
    </div>
    
    <br />
    <h3 align = "center" id="title"><u>Results</u></h3>
    <br />
  
    <table id = "table" border=" 1px solid">
      <tr align = "center">
          <th style ="width: 20%"><u>Name</u></th>
          <th style ="width: 20%"><u>Serial Number</u></th>
          <th style ="width: 20%"><u>Location</u></th>
          <th style ="width: 20%"><u>Is Active</u></th>
          <th style ="width: 20%"><u>Model</u></th>
          <th style ="width: 20%"><u>User Name</u></th>
          
      </tr>
      {% for c in table_computers %}
      <tr align = "center">
        <td> {{c.name}} </td>
        <td> {{c.serial}} </td>
        <td> {{c.location}} </td>
        <td> {{c.is_active}} </td>
        <td> {{c.model}} </td>
        <td> {{c.user_name}} </td>
  
  
  
        {%if user.is_admin %}
    
          <td>
            <a href="/delete_confirm/{{c.serial}}">
                <input type = "button" value = "Delete" class="btn btn-primary">
            </a> 
          </td>
  
          <td>
            <a href="/computer_edit/{{c.serial}}">
                <input type = "button" value = "Edit" class="btn btn-primary">
            </a> 
          </td>
        {%endif%}  
      </tr>
      {%endfor%}
    </table>

    {%if user.is_admin %}
    </br>
    <div align="center">
      <a href="/turn/{{1}}">
        <input type = "button" value = "1" class="btn btn-secondary">
      </a>

    
      <a href="/turn/{{page - 1}}">
        <input type = "button" value = "<" class="btn btn-secondary">
      </a>

      
      <a href="/turn/{{page + 1}}">
        <input type = "button" value = ">" class="btn btn-secondary">
      </a> 


      <a href="/turn/{{max}}">
        <input type = "button" value = "{{max}}" class="btn btn-secondary">
      </a>
    </div>
    {%endif%}

    </br>
    
    
    
    
</form>

{% endblock %}

