{% extends "base.html" %}

{% block title %}Search{% endblock %}
{% block content %}


<form method="POST">
  
    <h3 align="center" id="title"><u>Search</u></h3>
    <div class="form-group">
      <input
        type="name"
        class="form-control"
        id="name"
        name="name"
        placeholder="Enter Computer Name"
      />
    </div>

    <h3 align="center" id="title"><u>Filter</u></h3>
    
    <br />
    <div align="center">
      <select name="model" id="model">
        <option value="">By Model</option>
        {% for m in models %}      
        <option value="{{m}}">{{m}}</option>
        {%endfor%}
      </select>
  
      <select name="location" id="location">
        <option value="" selected>By Location</option>
        {% for L in locations %}      
        <option value="{{L}}">{{L}}</option>
        {%endfor%}
      </select>
  
      <select name="active" id="active">
        <option value="">Is Active</option>
        <option value="True">True</option>
        <option value="False">False</option>
      </select>
  
      <select name="user" id="user">
        <option value="" selected>By User</option>
        {% for u in users %}      
        <option value="{{u}}">{{u}}</option>
        {%endfor%}
      </select>
      <br />
      <br />

      <button type="submit" class="btn btn-primary">Search</button>
      <br />
      
    </div>
    
    <br />
    <h3 align = "center" id="title"><u>Results</u></h3>
    <br />
  
    <table id = "table" border=" 1px solid">
      <tr align = "center">
          <th style ="width: 20%"><u>Name</u></th>
          <th style ="width: 20%"><u>Serial Number</u></th>
          <th style ="width: 20%"><u>Location</u></th>
          <th style ="width: 20%"><u>Is Active</u></th>
          <th style ="width: 20%"><u>Model</u></th>
          <th style ="width: 20%"><u>User Name</u></th>
          
      </tr>
      {% for c in table_computers %}
      <tr align = "center">
        <td> {{c.name}} </td>
        <td> {{c.serial}} </td>
        <td> {{c.location}} </td>
        <td> {{c.is_active}} </td>
        <td> {{c.model}} </td>
        <td> {{c.user_name}} </td>
  
  
  
        {%if user.is_admin %}
    
          <td>
            <a href="/delete_confirm/{{c.serial}}">
                <input type = "button" value = "Delete" class="btn btn-primary">
            </a> 
          </td>
  
        <td>
          <a href="/computer_edit/{{c.serial}}">
              <input type = "button" value = "Edit" class="btn btn-primary">
          </a> 
        </td>
        {%endif%}  
      </tr>
      {%endfor%}
    </table>

    <a href="/turn/{{page - 1}}">
      <input type = "button" value = "<" class="btn btn-primary">
    </a>
    <a href="/turn/{{page + 1}}">
      <input type = "button" value = ">" class="btn btn-primary">
    </a> 
    
    <input type= "hidden" id= "inputID" value= "" >
    
  <script>
    function changePage(){
      
      var table = document.getElementById("table");
      
      var users = document.getElementById("users").value;
      users = users.split('\'')

      var names = document.getElementById("names").value;
      names = names.split('\'')
  
      var serials = document.getElementById("serials").value;
      serials = serials.split('\'')
      
      var locations = document.getElementById("locations").value;
      locations = locations.split('\'')
      
      var models = document.getElementById("models").value;
      models = models.split('\'')
      
      var activities = document.getElementById("activities").value;
      activities = activities.split('\'')

      

      
      
      //limit = document.getElementById("results").rows.length

      prev_page = document.getElementById("prev_page");
      if(prev_page == null){
        prev_page = 1
      }
      
      page = document.getElementById("page").value;

      page = page - 1
      page = page * 10
      if (page + 9 >= limit){
        limit = page + (limit % 10)
      }
      else{
        limit = page + 10
      }
      

      for (var x = 0; x < limit; x++){    
        for (var y = 0; y < 6; y++){
          if (y ==0){
            table.rows[x].cells[y].innerHTML = "";
          }
          else if (y == 1){}
          else if (y == 2){}
          else if (y == 3){}
          else if (y == 4){}
          else if (y == 5){}
          
        }
      }
    }
    
    /*var table = document.getElementById("table"),rIndex;

      for(var i = 1; i < table.rows.length; i++)
      {
        table.rows[i].onclick = function()
        {
          rIndex = this.rowIndex;
          
          document.getElementById("fname").value = this.cells[0].innerHTML;
          document.getElementById("lname").value = this.cells[1].innerHTML;
          document.getElementById("age").value = this.cells[2].innerHTML;
        };
      }


    // edit the row
      function editRow()
      {
        table.rows[rIndex].cells[0].innerHTML = document.getElementById("fname").value;
        table.rows[rIndex].cells[1].innerHTML = document.getElementById("lname").value;
        table.rows[rIndex].cells[2].innerHTML = document.getElementById("age").value;
      }
    */
    </script>  
    
</form>

{% endblock %}

